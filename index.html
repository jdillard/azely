
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>azely &#8212; Python  documentation</title>
<script>
  document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
  document.documentElement.dataset.theme = localStorage.getItem("theme") || "light"
</script>

  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=92025949c220c2e29695" rel="stylesheet">
<link href="_static/styles/pydata-sphinx-theme.css?digest=92025949c220c2e29695" rel="stylesheet">


  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />

  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="azely package" href="_apidoc/azely.html" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="docsearch:language" content="en">
  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="">
    <div class="bd-header-announcement container-fluid" id="banner">
      

    </div>

    
    <nav class="bd-header navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="bd-header__inner container-xl">

  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="#">
  
  
  
  
    <img src="_static/logo-light.svg" class="logo__image only-light" alt="Logo image">
    <img src="_static/logo-dark.svg" class="logo__image only-dark" alt="Logo image">
  
  
</a>
    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="fas fa-bars"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 current active nav-item">
 <a class="current reference internal nav-link" href="#">
  Home
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="_apidoc/azely.html">
  Package guide
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <span id="theme-switch" class="btn btn-sm btn-outline-primary navbar-btn rounded-circle">
    <a class="theme-switch" data-mode="light"><i class="fas fa-sun"></i></a>
    <a class="theme-switch" data-mode="dark"><i class="far fa-moon"></i></a>
    <a class="theme-switch" data-mode="auto"><i class="fas fa-adjust"></i></a>
</span>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/astropenguin/pandas-dataclasses/" rel="noopener" target="_blank" title="GitHub"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://twitter.com/astropengu_in/" rel="noopener" target="_blank" title="Twitter"><span><i class="fab fa-twitter-square"></i></span>
            <label class="sr-only">Twitter</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="bd-container container-xl">
      <div class="bd-container__inner row">
          

<!-- Only show if we have sidebars configured, else just a small margin  -->
<div class="bd-sidebar-primary col-12 col-md-3 bd-sidebar">
  <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    
  </div>
</nav>
  </div>
  <div class="sidebar-end-items">
  </div>
</div>


          


<div class="bd-sidebar-secondary d-none d-xl-block col-xl-2 bd-toc">
  
    
    <div class="toc-item">
      
<div class="tocsection onthispage mt-5 pt-1 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#tl-dr">
   TL;DR
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#features">
   Features
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#requirements">
   Requirements
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#installation">
   Installation
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#basic-usage">
   Basic usage
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#compute-function">
     Compute function
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#output-dataframe">
     Output DataFrame
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#example">
     Example
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#advanced-usage">
   Advanced usage
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#plotting-in-local-sidereal-time">
     Plotting in local sidereal time
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#user-defined-information">
     User-defined information
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#cached-information">
     Cached information
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#customizing-default-values">
     Customizing default values
    </a>
   </li>
  </ul>
 </li>
</ul>

</nav>
    </div>
    
    <div class="toc-item">
      
    </div>
    
  
</div>


          
          
          <div class="bd-content col-12 col-md-9 col-xl-7">
              
              <article class="bd-article" role="main">
                
  <section id="azely">
<h1>azely<a class="headerlink" href="#azely" title="Permalink to this heading">#</a></h1>
<p><a class="reference external" href="https://pypi.org/project/azely/"><img alt="Release" src="https://img.shields.io/pypi/v/azely?label=Release&amp;color=cornflowerblue&amp;style=flat-square" /></a>
<a class="reference external" href="https://pypi.org/project/azely/"><img alt="Python" src="https://img.shields.io/pypi/pyversions/azely?label=Python&amp;color=cornflowerblue&amp;style=flat-square" /></a>
<a class="reference external" href="https://pepy.tech/project/azely"><img alt="Downloads" src="https://img.shields.io/pypi/dm/azely?label=Downloads&amp;color=cornflowerblue&amp;style=flat-square" /></a>
<a class="reference external" href="https://doi.org/10.5281/zenodo.3680060"><img alt="DOI" src="https://img.shields.io/badge/DOI-10.5281/zenodo.3680060-cornflowerblue?style=flat-square" /></a>
<a class="reference external" href="https://github.com/astropenguin/azely/actions"><img alt="Tests" src="https://img.shields.io/github/workflow/status/astropenguin/azely/Tests?label=Tests&amp;style=flat-square" /></a></p>
<p>Computation and plotting of azimuth and elevation for astronomical objects</p>
<section id="tl-dr">
<h2>TL;DR<a class="headerlink" href="#tl-dr" title="Permalink to this heading">#</a></h2>
<p>Azely (pronounced as “as-elie”) is a Python package for computation and plotting of horizontal coordinates (azimuth and elevation; az/el, hereafter) of astronomical objects at given location and time.
While computation and plotting are realized by <a class="reference external" href="https://astropy.org">Astropy</a> and <a class="reference external" href="https://matplotlib.org">Matplotlib</a>, what azely provides is high-level API to use them easily.
In fact azely offers one-liner to compute and plot, for example, one-day elevation of the Sun in Tokyo:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">azely</span><span class="o">.</span><span class="n">compute</span><span class="p">(</span><span class="s1">&#39;Sun&#39;</span><span class="p">,</span> <span class="s1">&#39;Tokyo&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">el</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ylim</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">90</span><span class="p">))</span>
</pre></div>
</div>
<p><img alt="one-liner.svg" src="https://raw.githubusercontent.com/astropenguin/azely/v0.7.0/docs/_static/one-liner.svg" /></p>
</section>
<section id="features">
<h2>Features<a class="headerlink" href="#features" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p><strong>High-level API:</strong> azely provides a simple yet powerful <code class="docutils literal notranslate"><span class="pre">compute()</span></code> function. Users can complete most of operation with it (e.g., information acquisition and computation).</p></li>
<li><p><strong>Handy output:</strong> azely’s output (from <code class="docutils literal notranslate"><span class="pre">compute()</span></code>) is <a class="reference external" href="https://pandas.pydata.org">pandas</a> DataFrame, a de facto standard data structure of Python. Users can convert it to other formats like CSV and plot it by <a class="reference external" href="https://matplotlib.org">Matplotlib</a> using builtin methods.</p></li>
<li><p><strong>Web information acquisition:</strong> azely can automatically acquire object and location information (i.e., longitude and latitude) from online services (e.g., catalogues or maps). Obtained information is cached in a local <a class="reference external" href="https://toml.io">TOML</a> file for an offline use.</p></li>
<li><p><strong>User-defined information:</strong> azely also offers to use user-defined object and location information written in a <a class="reference external" href="https://toml.io">TOML</a> file.</p></li>
</ul>
</section>
<section id="requirements">
<h2>Requirements<a class="headerlink" href="#requirements" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p><strong>Python:</strong> 3.7, 3.8, 3.9, and 3.10 (tested by author)</p></li>
<li><p><strong>Dependencies:</strong> See <a class="reference external" href="https://github.com/astropenguin/azely/blob/v0.7.0/pyproject.toml">pyproject.toml</a></p></li>
</ul>
</section>
<section id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this heading">#</a></h2>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>$ pip install azely
</pre></div>
</div>
</section>
<section id="basic-usage">
<h2>Basic usage<a class="headerlink" href="#basic-usage" title="Permalink to this heading">#</a></h2>
<p>This section describes basic az/el computation using <code class="docutils literal notranslate"><span class="pre">compute()</span></code> function.</p>
<section id="compute-function">
<h3>Compute function<a class="headerlink" href="#compute-function" title="Permalink to this heading">#</a></h3>
<p>Azely’s <code class="docutils literal notranslate"><span class="pre">compute()</span></code> function receives the following parameters and returns <a class="reference external" href="https://pandas.pydata.org">pandas</a> DataFrame (<code class="docutils literal notranslate"><span class="pre">df</span></code>):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">azely</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">azely</span><span class="o">.</span><span class="n">compute</span><span class="p">(</span><span class="nb">object</span><span class="p">,</span> <span class="n">site</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="n">view</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span>
</pre></div>
</div>
<p>This means that <code class="docutils literal notranslate"><span class="pre">azely</span></code> will <code class="docutils literal notranslate"><span class="pre">compute</span></code> az/el of <code class="docutils literal notranslate"><span class="pre">object</span></code> observed from <code class="docutils literal notranslate"><span class="pre">site</span></code> at (on) <code class="docutils literal notranslate"><span class="pre">time</span></code> in <code class="docutils literal notranslate"><span class="pre">view</span></code>.
For example, the following code will compute az/el of Sun observed from ALMA AOS on Jan. 1st 2020 in Tokyo.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">azely</span><span class="o">.</span><span class="n">compute</span><span class="p">(</span><span class="s1">&#39;Sun&#39;</span><span class="p">,</span> <span class="s1">&#39;ALMA AOS&#39;</span><span class="p">,</span> <span class="s1">&#39;2020-01-01&#39;</span><span class="p">,</span> <span class="s1">&#39;Tokyo&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Acceptable formats of each parameter and examples are as follows.</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Parameter</p></th>
<th class="head"><p>Acceptable format</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Examples</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">object</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;obj.</span> <span class="pre">name&gt;</span></code></p></td>
<td><p>name of object to be searched</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">'Sun'</span></code>, <code class="docutils literal notranslate"><span class="pre">'NGC1068'</span></code></p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;toml&gt;:&lt;obj.</span> <span class="pre">name&gt;</span></code></p></td>
<td><p>user-defined object to be loaded (see below)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">'user.toml:M42'</span></code>, <code class="docutils literal notranslate"><span class="pre">'user:M42'</span></code> (also valid)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">site</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">'here'</span></code> (default)</p></td>
<td><p>current location (guess by IP address)</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;loc.</span> <span class="pre">name&gt;</span></code></p></td>
<td><p>name of location to be searched</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">'ALMA</span> <span class="pre">AOS'</span></code>, <code class="docutils literal notranslate"><span class="pre">'Tokyo'</span></code></p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;toml&gt;:&lt;loc.</span> <span class="pre">name&gt;</span></code></p></td>
<td><p>user-defined location to be loaded (see below)</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">'user.toml:ASTE'</span></code>, <code class="docutils literal notranslate"><span class="pre">'user:ASTE'</span></code> (also valid)</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">time</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">'today'</span></code> (default)</p></td>
<td><p>get one-day time range of today</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">'now'</span></code></p></td>
<td><p>get current time</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;time&gt;</span></code></p></td>
<td><p>start time of one-day time range</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">'2020-01-01'</span></code>, <code class="docutils literal notranslate"><span class="pre">'1/1</span> <span class="pre">12:00'</span></code>, <code class="docutils literal notranslate"><span class="pre">'Jan.</span> <span class="pre">1st'</span></code></p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;time&gt;</span> <span class="pre">to</span> <span class="pre">&lt;time&gt;</span></code></p></td>
<td><p>start and end of time range</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">'1/1</span> <span class="pre">to</span> <span class="pre">1/3'</span></code>, <code class="docutils literal notranslate"><span class="pre">'Jan.</span> <span class="pre">1st</span> <span class="pre">to</span> <span class="pre">Jan.</span> <span class="pre">3rd'</span></code></p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">view</span></code></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">''</span></code> (default)</p></td>
<td><p>use timezone of <code class="docutils literal notranslate"><span class="pre">site</span></code></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;tz</span> <span class="pre">name&gt;</span></code></p></td>
<td><p>name of timezone database</p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">'Asia/Tokyo'</span></code>, <code class="docutils literal notranslate"><span class="pre">'UTC'</span></code></p></td>
</tr>
<tr class="row-odd"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;loc.</span> <span class="pre">name&gt;</span></code></p></td>
<td><p>name of location from which timezone is identified</p></td>
<td><p>same as <code class="docutils literal notranslate"><span class="pre">site</span></code>’s examples</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">&lt;toml&gt;:&lt;loc.</span> <span class="pre">name&gt;</span></code></p></td>
<td><p>user-defined location from which timezone is identified</p></td>
<td><p>same as <code class="docutils literal notranslate"><span class="pre">site</span></code>’s examples</p></td>
</tr>
</tbody>
</table>
</section>
<section id="output-dataframe">
<h3>Output DataFrame<a class="headerlink" href="#output-dataframe" title="Permalink to this heading">#</a></h3>
<p>The output DataFrame contains az/el expressed in units of degrees and local sidereal time (LST) at <code class="docutils literal notranslate"><span class="pre">site</span></code> indexed by time in <code class="docutils literal notranslate"><span class="pre">view</span></code>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">df</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-plaintext notranslate"><div class="highlight"><pre><span></span>                                  az         el             lst
Asia/Tokyo
2020-01-01 00:00:00+09:00  94.820323  68.416756 17:07:59.405556
2020-01-01 00:10:00+09:00  94.333979  70.709575 17:18:01.048298
2020-01-01 00:20:00+09:00  93.856123  73.003864 17:28:02.691044
2020-01-01 00:30:00+09:00  93.388695  75.299436 17:38:04.333786
2020-01-01 00:40:00+09:00  92.935403  77.596109 17:48:05.976529
...                              ...        ...             ...
2020-01-01 23:20:00+09:00  96.711830  59.146249 16:31:49.389513
2020-01-01 23:30:00+09:00  96.185941  61.431823 16:41:51.032256
2020-01-01 23:40:00+09:00  95.664855  63.719668 16:51:52.674998
2020-01-01 23:50:00+09:00  95.147951  66.009577 17:01:54.317740
2020-01-02 00:00:00+09:00  94.634561  68.301349 17:11:55.960483

[145 rows x 3 columns]
</pre></div>
</div>
</section>
<section id="example">
<h3>Example<a class="headerlink" href="#example" title="Permalink to this heading">#</a></h3>
<p>Here is a sample script which will plot one-day elevation of the Sun and candidates of black hole shadow observations at ALMA AOS on Apr. 11th 2017 in UTC.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">azely</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="n">plt</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">use</span><span class="p">(</span><span class="s1">&#39;seaborn-whitegrid&#39;</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>

<span class="n">site</span> <span class="o">=</span> <span class="s1">&#39;ALMA AOS&#39;</span>
<span class="n">time</span> <span class="o">=</span> <span class="s1">&#39;Apr. 11th 2017&#39;</span>
<span class="n">view</span> <span class="o">=</span> <span class="s1">&#39;UTC&#39;</span>

<span class="k">for</span> <span class="n">obj</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;Sun&#39;</span><span class="p">,</span> <span class="s1">&#39;Sgr A*&#39;</span><span class="p">,</span> <span class="s1">&#39;M87&#39;</span><span class="p">,</span> <span class="s1">&#39;M104&#39;</span><span class="p">,</span> <span class="s1">&#39;Cen A&#39;</span><span class="p">):</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">azely</span><span class="o">.</span><span class="n">compute</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">site</span><span class="p">,</span> <span class="n">time</span><span class="p">,</span> <span class="n">view</span><span class="p">)</span>
    <span class="n">df</span><span class="o">.</span><span class="n">el</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">obj</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;site: </span><span class="si">{</span><span class="n">site</span><span class="si">}</span><span class="s1">, view: </span><span class="si">{</span><span class="n">view</span><span class="si">}</span><span class="s1">, time: </span><span class="si">{</span><span class="n">time</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Elevation (deg)&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">90</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
</pre></div>
</div>
<p><img alt="multiple-objects.svg" src="https://raw.githubusercontent.com/astropenguin/azely/v0.7.0/docs/_static/multiple-objects.svg" /></p>
</section>
</section>
<section id="advanced-usage">
<h2>Advanced usage<a class="headerlink" href="#advanced-usage" title="Permalink to this heading">#</a></h2>
<p>This section describes advanced usage of azely by special DataFrame accessor and local <a class="reference external" href="https://toml.io">TOML</a> files.
Note that azely will create a config directory, <code class="docutils literal notranslate"><span class="pre">$XDG_CONFIG_HOME/azely</span></code> (if the environment variable exists) or <code class="docutils literal notranslate"><span class="pre">~/.config/azely</span></code>, after importing <code class="docutils literal notranslate"><span class="pre">azely</span></code> for the first time.
<a class="reference external" href="https://toml.io">TOML</a> files for configuration (<code class="docutils literal notranslate"><span class="pre">config.toml</span></code>) and cached information (<code class="docutils literal notranslate"><span class="pre">objects.toml</span></code>, <code class="docutils literal notranslate"><span class="pre">locations.toml</span></code>) will be automatically created in it.</p>
<section id="plotting-in-local-sidereal-time">
<h3>Plotting in local sidereal time<a class="headerlink" href="#plotting-in-local-sidereal-time" title="Permalink to this heading">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">compute()</span></code> function does not accept local sidereal time (LST) as <code class="docutils literal notranslate"><span class="pre">view</span></code> (i.e., <code class="docutils literal notranslate"><span class="pre">view='LST'</span></code>) because LST has no information on year and date.
Instead an output DataFrame has <code class="docutils literal notranslate"><span class="pre">in_lst</span></code> property which provides az/el with a LST index converted from the original time index.
For example, the following code will plot elevation of an object in LST:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span><span class="o">.</span><span class="n">in_lst</span><span class="o">.</span><span class="n">el</span><span class="o">.</span><span class="n">plot</span><span class="p">()</span>
</pre></div>
</div>
<p>In order to use LST values as an index of DataFrame, LST has pseudo dates which start from <code class="docutils literal notranslate"><span class="pre">1970-01-01</span></code>.
Please ignore them or hide them by using <a class="reference external" href="https://matplotlib.org">Matplotlib</a> DateFormatter when you plot the result.
Here is a sample script which has JST time axis at the bottom and LST axis at the top of a figure, respectively.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.dates</span> <span class="k">as</span> <span class="nn">mdates</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">4</span><span class="p">))</span>
<span class="n">twin</span> <span class="o">=</span> <span class="n">ax</span><span class="o">.</span><span class="n">twiny</span><span class="p">()</span>

<span class="n">df</span> <span class="o">=</span> <span class="n">azely</span><span class="o">.</span><span class="n">compute</span><span class="p">(</span><span class="s1">&#39;Sun&#39;</span><span class="p">,</span> <span class="s1">&#39;Tokyo&#39;</span><span class="p">,</span> <span class="s1">&#39;2020-01-01&#39;</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">el</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="n">df</span><span class="o">.</span><span class="n">object</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
<span class="n">df</span><span class="o">.</span><span class="n">in_lst</span><span class="o">.</span><span class="n">el</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">ax</span><span class="o">=</span><span class="n">twin</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s2">&quot;Elevation (deg)&quot;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">90</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>

<span class="n">formatter</span> <span class="o">=</span> <span class="n">mdates</span><span class="o">.</span><span class="n">DateFormatter</span><span class="p">(</span><span class="s1">&#39;%H:%M&#39;</span><span class="p">)</span>
<span class="n">twin</span><span class="o">.</span><span class="n">xaxis</span><span class="o">.</span><span class="n">set_major_formatter</span><span class="p">(</span><span class="n">formatter</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">autofmt_xdate</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p><img alt="lst-axis.svg" src="https://raw.githubusercontent.com/astropenguin/azely/v0.7.0/docs/_static/lst-axis.svg" /></p>
</section>
<section id="user-defined-information">
<h3>User-defined information<a class="headerlink" href="#user-defined-information" title="Permalink to this heading">#</a></h3>
<p>Azely offers to use user-defined information from a <a class="reference external" href="https://toml.io">TOML</a> file.
Here is a sample TOML file (e.g., <code class="docutils literal notranslate"><span class="pre">user.toml</span></code>) which has custom object and location informaiton.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># user.toml</span>

<span class="p">[</span><span class="n">ASTE</span><span class="p">]</span>
<span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;ASTE Telescope&quot;</span>
<span class="n">longitude</span> <span class="o">=</span> <span class="s2">&quot;-67.70317915&quot;</span>
<span class="n">latitude</span> <span class="o">=</span> <span class="s2">&quot;-22.97163575&quot;</span>
<span class="n">altitude</span> <span class="o">=</span> <span class="s2">&quot;0&quot;</span>

<span class="p">[</span><span class="n">GC</span><span class="p">]</span>
<span class="n">name</span> <span class="o">=</span> <span class="s2">&quot;Galactic center&quot;</span>
<span class="n">frame</span> <span class="o">=</span> <span class="s2">&quot;galactic&quot;</span>
<span class="n">longitude</span> <span class="o">=</span> <span class="s2">&quot;0deg&quot;</span>
<span class="n">latitude</span> <span class="o">=</span> <span class="s2">&quot;0deg&quot;</span>
</pre></div>
</div>
<p>If it is located in a current directory or in the azely’s config directory, users can use the information like:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">azely</span><span class="o">.</span><span class="n">compute</span><span class="p">(</span><span class="s1">&#39;user:GC&#39;</span><span class="p">,</span> <span class="s1">&#39;user:ASTE&#39;</span><span class="p">,</span> <span class="s1">&#39;2020-01-01&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="cached-information">
<h3>Cached information<a class="headerlink" href="#cached-information" title="Permalink to this heading">#</a></h3>
<p>Object and location information obtained from online services is cached to <a class="reference external" href="https://toml.io">TOML</a> files (<code class="docutils literal notranslate"><span class="pre">objects.toml</span></code>, <code class="docutils literal notranslate"><span class="pre">locations.toml</span></code>) in the azely’s config directory with the same format as user-defined files.
If a query argument is given with <code class="docutils literal notranslate"><span class="pre">'!'</span></code> at the end of it, then the cached values are forcibly updated by a new acquisition.
This is useful, for example, when users want to update a current location:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">df</span> <span class="o">=</span> <span class="n">azely</span><span class="o">.</span><span class="n">compute</span><span class="p">(</span><span class="s1">&#39;Sun&#39;</span><span class="p">,</span> <span class="s1">&#39;here!&#39;</span><span class="p">,</span> <span class="s1">&#39;2020-01-01&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="customizing-default-values">
<h3>Customizing default values<a class="headerlink" href="#customizing-default-values" title="Permalink to this heading">#</a></h3>
<p>Users can modify default values of the <code class="docutils literal notranslate"><span class="pre">compute()</span></code> function by editing the azely’s config <a class="reference external" href="https://toml.io">TOML</a> file (<code class="docutils literal notranslate"><span class="pre">config.toml</span></code>) in the azely’s config directory like:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># config.toml</span>

<span class="p">[</span><span class="n">compute</span><span class="p">]</span>
<span class="n">site</span> <span class="o">=</span> <span class="s2">&quot;Tokyo&quot;</span>
<span class="n">time</span> <span class="o">=</span> <span class="s2">&quot;now&quot;</span>
</pre></div>
</div>
<p>Then <code class="docutils literal notranslate"><span class="pre">compute('Sun')</span></code> becomes equivalent to <code class="docutils literal notranslate"><span class="pre">compute('Sun',</span> <span class="pre">'Tokyo',</span> <span class="pre">'now')</span></code>.</p>
<!-- references -->
<div class="toctree-wrapper compound">
</div>
</section>
</section>
</section>


              </article>
              

              
              <footer class="bd-footer-article">
                  <!-- Previous / next buttons -->
<div class='prev-next-area'>
  <a class='right-next' id="next-link" href="_apidoc/azely.html" title="next page">
  <div class="prev-next-info">
      <p class="prev-next-subtitle">next</p>
      <p class="prev-next-title">azely package</p>
  </div>
  <i class="fas fa-angle-right"></i>
  </a>
</div>
              </footer>
              
          </div>
          
      </div>
    </div>

  
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695"></script>

<footer class="bd-footer"><div class="bd-footer__inner container">
  
  <div class="footer-item">
    <p class="copyright">
    &copy; Copyright 2017-2022, Akio Taniguchi.<br>
</p>
  </div>
  
  <div class="footer-item">
    <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 5.3.0.<br>
</p>
  </div>
  
</div>
</footer>
  </body>
</html>